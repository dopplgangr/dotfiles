if [ -d "$(git rev-parse --git-dir 2>/dev/null)" ]; then
  _git_prompt_abbrev=$(git rev-parse --abbrev-ref HEAD)
  _git_prompt_status=$(git diff --no-ext-diff --quiet --exit-code && echo '%F{green}✔%f' || echo '%F{red}✗')
  echo "on %F{magenta} ${_git_prompt_abbrev} ${_git_prompt_status}%f "
fi
